<button mat-raised-button *ngIf="management" class="newMessage" (click)="openModal(myOpentemplate)">Send document &nbsp;
    <i class="fa fa-commenting-o" aria-hidden="true"></i></button>

<!--this is the Tabs only inbox is for normal members, inbox and outbox is for one of the management (excluding chariperson), inbox, outbox and messages request is for chairpeople-->
<mat-tab-group>
    <!--everything for the inbox-->
    <mat-tab label="Inbox" *ngIf="member">
        <mat-card class="mat-card tab-row" fxFlex="100">
            <mat-card-content fxFlex="100" fxLayout="row wrap">
                <div fxLayout="row wrap" fxFlex="100" fxLayoutGap="5px" fxLayoutAlign="end center">
                </div>
                <div fxFlex="100" class="filter-header" fxLayoutAlign="space-between center">
                    <mat-form-field>
                        <input matInput (keyup)="applyInboxFilter($event.target.value)" placeholder="Filter">
                    </mat-form-field>
                </div>
                <mat-table fxFlex="100" #inboxTable [dataSource]="inboxDataSource" matSort>
                    <ng-container matColumnDef="Id">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Id </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.id}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="SendFrom">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Send From </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.sendFrom}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="Title">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Title </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.title}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="Note">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Note </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.note}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="Actions">
                        <mat-header-cell *matHeaderCellDef style="min-width: 20px" fxLayoutAlign="end center">Actions
                        </mat-header-cell>
                        <mat-cell *matCellDef="let element" style="min-width: 20px" fxLayoutAlign="end center">
                            <button matTooltip="View Document" mat-icon-button color="primary"
                                (click)="openDocument(element.id)">
                                <mat-icon aria-label="">remove_red_eye</mat-icon>
                            </button>
                            <div *ngIf="!element.acknoledged">
                                <button matTooltip="Acknoledge document" mat-icon-button color="primary"
                                    (click)="opentViewDocument(viewMessage, element.id)">
                                    <mat-icon aria-label="">thumb_up</mat-icon>
                                </button>
                            </div>

                        </mat-cell>
                    </ng-container>
                    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                </mat-table>
                <div fxFlex="grow">
                    <mat-paginator #inboxPaginator [pageSize]="10" [pageSizeOptions]="[5, 10, 20]"
                        [showFirstLastButtons]="true">
                    </mat-paginator>
                </div>
            </mat-card-content>
        </mat-card>
    </mat-tab>

    <!--everything for the outbox-->
    <mat-tab label="Outbox" *ngIf="management">
        <mat-card class="mat-card tab-row" fxFlex="100">
            <mat-card-content fxFlex="100" fxLayout="row wrap">
                <div fxLayout="row wrap" fxFlex="100" fxLayoutGap="5px" fxLayoutAlign="end center">
                </div>
                <div fxFlex="100" class="filter-header" fxLayoutAlign="space-between center">
                    <mat-form-field>
                        <input matInput (keyup)="applyOutboxFilter($event.target.value)" placeholder="Filter">
                    </mat-form-field>
                </div>
                <mat-table fxFlex="100" #outboxTable [dataSource]="outboxDataSource" matSort>
                    <ng-container matColumnDef="Id">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Id </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.id}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="SendFrom">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Send From </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.sendFrom}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="Title">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Title </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.title}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="Note">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Note </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.note}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="Actions">
                        <mat-header-cell *matHeaderCellDef style="min-width: 20px" fxLayoutAlign="end center">Actions
                        </mat-header-cell>
                        <mat-cell *matCellDef="let element" style="min-width: 20px" fxLayoutAlign="end center">
                            <button matTooltip="View Document" mat-icon-button color="primary"
                                (click)="openDocument(element.id)">
                                <mat-icon aria-label="">remove_red_eye</mat-icon>
                            </button>
                            <button matTooltip="View Acknoledgements" mat-icon-button color="primary"
                                (click)="viewDocumentsAcknoledgments(myAcknoledgetemplate, element.id)">
                                <mat-icon aria-label="">handshake</mat-icon>
                            </button>
                        </mat-cell>
                    </ng-container>
                    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                </mat-table>
                <div fxFlex="grow">
                    <mat-paginator #inboxPaginator [pageSize]="10" [pageSizeOptions]="[5, 10, 20]"
                        [showFirstLastButtons]="true">
                    </mat-paginator>
                </div>
            </mat-card-content>
        </mat-card>
    </mat-tab>

    <!--everything for the pending-->
    <mat-tab label="Message Requests" *ngIf="chair">
        <mat-card class="mat-card tab-row" fxFlex="100">
            <mat-card-content fxFlex="100" fxLayout="row wrap">
                <div fxLayout="row wrap" fxFlex="100" fxLayoutGap="5px" fxLayoutAlign="end center">
                </div>
                <div fxFlex="100" class="filter-header" fxLayoutAlign="space-between center">
                    <mat-form-field>
                        <input matInput (keyup)="applyPendingFilter($event.target.value)" placeholder="Filter">
                    </mat-form-field>
                </div>
                <mat-table fxFlex="100" #pendingTable [dataSource]="pendingDataSource" matSort>
                    <ng-container matColumnDef="Id">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Id </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.id}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="SendFrom">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Send From </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.sendFrom}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="Title">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Title </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.title}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="Note">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Note </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.note}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="Actions">
                        <mat-header-cell *matHeaderCellDef style="min-width: 20px" fxLayoutAlign="end center">Actions
                        </mat-header-cell>
                        <mat-cell *matCellDef="let element" style="min-width: 20px" fxLayoutAlign="end center">
                            <button matTooltip="View Document" mat-icon-button color="primary"
                                (click)="openDocument(element.id)">
                                <mat-icon aria-label="">remove_red_eye</mat-icon>
                            </button>
                            <button matTooltip="Aprove Document" mat-icon-button color="primary"
                                (click)="aproveDocument(element.id)">
                                <mat-icon aria-label="">check</mat-icon>
                            </button>
                            <button matTooltip="Decline Document" mat-icon-button color="primary"
                                (click)="declineDocument(element.id)">
                                <mat-icon aria-label="">close</mat-icon>
                            </button>
                        </mat-cell>
                    </ng-container>
                    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                </mat-table>
                <div fxFlex="grow">
                    <mat-paginator #inboxPaginator [pageSize]="10" [pageSizeOptions]="[5, 10, 20]"
                        [showFirstLastButtons]="true">
                    </mat-paginator>
                </div>
            </mat-card-content>
        </mat-card>
    </mat-tab>
</mat-tab-group>

<ng-template #viewMessage>
    <div style="flex-direction: column; box-sizing: border-box; display: flex;">
        <h1>
            Acknoledgement Form
        </h1>
        <p>
            I the reader and the current logged in user acknoledge that I have seen this document and I permit the use
            of this data for any meens possible.
        </p>
        <p>
            In the case of I missed information or important information I will not be able to held fishpal or the
            document sender responsable of missing information because I acknoledge that I have seen this document and
            agree with the information contained within the document.
        </p>
    </div>
    <button matTooltip="Aprove Document" style="margin-right: 100px;" mat-icon-button color="primary" (click)="agreeDocument()">
        I Agree<mat-icon aria-label="">check</mat-icon>
    </button>
    <button matTooltip="Decline Document" mat-icon-button color="primary" (click)="disagreeDocument()">
        I Disagree<mat-icon aria-label="">close</mat-icon>
    </button>
</ng-template>

<ng-template #myAcknoledgetemplate>
    <div style="flex-direction: column; box-sizing: border-box; display: flex;">
        <mat-tab-group>
            <mat-tab label="Recieved Acknoledgements">
                <mat-card-content fxFlex="100" fxLayout="row wrap">
                    <div fxLayout="row wrap" fxFlex="100" fxLayoutGap="5px" fxLayoutAlign="end center">
                    </div>
                    <div fxFlex="100" class="filter-header" fxLayoutAlign="space-between center">
                        <mat-form-field>
                            <input matInput (keyup)="applyAcknoledgeFilter($event.target.value)" placeholder="Filter">
                        </mat-form-field>
                    </div>
                    <mat-table fxFlex="100" #sendTable [dataSource]="acknoledgeDataSource" matSort>
                        <ng-container matColumnDef="Id">
                            <mat-header-cell *matHeaderCellDef mat-sort-header> Id </mat-header-cell>
                            <mat-cell *matCellDef="let element"> {{element.id}} </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="Username">
                            <mat-header-cell *matHeaderCellDef mat-sort-header> Username </mat-header-cell>
                            <mat-cell *matCellDef="let element"> {{element.username}} </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="FullName">
                            <mat-header-cell *matHeaderCellDef mat-sort-header> FullName </mat-header-cell>
                            <mat-cell *matCellDef="let element"> {{element.fullName}} </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="Facet">
                            <mat-header-cell *matHeaderCellDef mat-sort-header> Facet </mat-header-cell>
                            <mat-cell *matCellDef="let element"> {{element.facet}} </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="Role">
                            <mat-header-cell *matHeaderCellDef mat-sort-header> Role </mat-header-cell>
                            <mat-cell *matCellDef="let element"> {{element.role}} </mat-cell>
                        </ng-container>
                        <mat-header-row *matHeaderRowDef="displayedAcknoledgeColumns"></mat-header-row>
                        <mat-row *matRowDef="let row; columns: displayedAcknoledgeColumns;"></mat-row>
                    </mat-table>
                    <div fxFlex="grow">
                        <mat-paginator #acknoledgePaginator [pageSize]="20" [pageSizeOptions]="[10, 20, 40]"
                            [showFirstLastButtons]="true">
                        </mat-paginator>
                    </div>
                </mat-card-content>
            </mat-tab>
            <mat-tab label="Pending Acknoledgements">
                <mat-card-content fxFlex="100" fxLayout="row wrap">
                    <div fxLayout="row wrap" fxFlex="100" fxLayoutGap="5px" fxLayoutAlign="end center">
                    </div>
                    <div fxFlex="100" class="filter-header" fxLayoutAlign="space-between center">
                        <mat-form-field>
                            <input matInput (keyup)="applyAcknoledgeFilter($event.target.value)" placeholder="Filter">
                        </mat-form-field>
                    </div>
                    <mat-table fxFlex="100" #sendTable [dataSource]="pedingAcknoledgeDataSource" matSort>
                        <ng-container matColumnDef="Id">
                            <mat-header-cell *matHeaderCellDef mat-sort-header> Id </mat-header-cell>
                            <mat-cell *matCellDef="let element"> {{element.id}} </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="Username">
                            <mat-header-cell *matHeaderCellDef mat-sort-header> Username </mat-header-cell>
                            <mat-cell *matCellDef="let element"> {{element.username}} </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="FullName">
                            <mat-header-cell *matHeaderCellDef mat-sort-header> FullName </mat-header-cell>
                            <mat-cell *matCellDef="let element"> {{element.fullName}} </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="Facet">
                            <mat-header-cell *matHeaderCellDef mat-sort-header> Facet </mat-header-cell>
                            <mat-cell *matCellDef="let element"> {{element.facet}} </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="Role">
                            <mat-header-cell *matHeaderCellDef mat-sort-header> Role </mat-header-cell>
                            <mat-cell *matCellDef="let element"> {{element.role}} </mat-cell>
                        </ng-container>
                        <mat-header-row *matHeaderRowDef="displayedAcknoledgeColumns"></mat-header-row>
                        <mat-row *matRowDef="let row; columns: displayedAcknoledgeColumns;"></mat-row>
                    </mat-table>
                    <div fxFlex="grow">
                        <mat-paginator #acknoledgePaginator [pageSize]="20" [pageSizeOptions]="[10, 20, 40]"
                            [showFirstLastButtons]="true">
                        </mat-paginator>
                    </div>
                </mat-card-content>
            </mat-tab>
        </mat-tab-group>
    </div>
</ng-template>

<ng-template #myOpentemplate>
    <div style="flex-direction: column; box-sizing: border-box; display: flex;">
        <div style="flex-direction: row; box-sizing: border-box; display: flex;">
            <button style="margin-bottom: 20px; padding-bottom: 5px; margin-right: 15px;" mat-button
                (click)="DocumentFile.click()">
                <mat-icon style="margin-right: 5px; margin-bottom: 5px;">backup</mat-icon>
                Upload Document
            </button>
            <input hidden type="file" accept=".pdf" id="File" #DocumentFile (change)="OpenFile($event)">
            <mat-form-field appearance="fill" style="width: 300px; margin-right: 15px;">
                <mat-label>
                    Document Title
                </mat-label>
                <input [(ngModel)]="title" matInput>
            </mat-form-field>

            <mat-form-field appearance="fill" style="width: 300px; margin-right: 15px;">
                <mat-label>
                    Document Note
                </mat-label>
                <input [(ngModel)]="note" matInput>
            </mat-form-field>

            <button matTooltip="Send document" style="padding-top: 10px; padding-left: 15px;" mat-icon-button
                color="primary" (click)="sendMessage()">
                <mat-icon aria-label="">send</mat-icon>
            </button>

        </div>
        <mat-card-content fxFlex="100" fxLayout="row wrap">
            <div fxLayout="row wrap" fxFlex="100" fxLayoutGap="5px" fxLayoutAlign="end center">
            </div>
            <div fxFlex="100" class="filter-header" fxLayoutAlign="space-between center">
                <mat-form-field>
                    <input matInput (keyup)="applySendFilter($event.target.value)" placeholder="Filter">
                </mat-form-field>
            </div>
            <mat-table fxFlex="100" #sendTable [dataSource]="sendDataSource" matSort>
                <ng-container matColumnDef="Id">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Id </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.id}} </mat-cell>
                </ng-container>
                <ng-container matColumnDef="Username">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Username </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.username}} </mat-cell>
                </ng-container>
                <ng-container matColumnDef="FullName">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> FullName </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.fullName}} </mat-cell>
                </ng-container>
                <ng-container matColumnDef="Facet">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Facet </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.facet}} </mat-cell>
                </ng-container>
                <ng-container matColumnDef="Role">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Role </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.role}} </mat-cell>
                </ng-container>
                <ng-container matColumnDef="Actions">
                    <mat-header-cell *matHeaderCellDef style="min-width: 20px" fxLayoutAlign="end center">Actions
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element" style="min-width: 20px" fxLayoutAlign="end center">
                        <label class="container" style="margin-top: 5px">
                            <input type="checkbox" (change)="selectProfile(element.id)">
                            <span class="checkmark"></span>
                        </label>
                    </mat-cell>
                </ng-container>
                <mat-header-row *matHeaderRowDef="displayedSendColumns"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedSendColumns;"></mat-row>
            </mat-table>
            <div fxFlex="grow">
                <mat-paginator #inboxPaginator [pageSize]="20" [pageSizeOptions]="[10, 20, 40]"
                    [showFirstLastButtons]="true">
                </mat-paginator>
            </div>
        </mat-card-content>
    </div>
</ng-template>